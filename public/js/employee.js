$(document).ready((function(){var t=$("#employee-list").DataTable({stateSave:!0,bFilter:!1,pageLength:25,oLanguage:{sEmptyTable:"There is no record found"}});function r(){var e=$("input[name='searchInput']").val(),r=$("input[name='searchFilter']:checked").val(),a=$("input[name='employeeStatus']:checked").val();$.ajax({type:"get",url:"api/employees/search",data:{keyword:e,filter:r,status:a},success:function(e){t.clear().draw(),JSON.parse(e).forEach((function(e){var r="";0==e.active_status?r=1==e.approved_status||2==e.approved_status||4==e.approved_status?"Deactivated":"Pending for Approval":1==e.active_status&&(r=1==e.approved_status?"Deactivated":2==e.approved_status||4==e.approved_status?"Active":"Pending for Approval"),url=window.location.href+"/"+e.id,t.row.add(['<a href="'+url+'">'+e.last_name+", "+e.first_name+" ("+e.middle_name+")</a>",e.email,e.cellphone_number,e.current_address_city,e.current_address_province,r]).draw(!1)}))}})}function a(){var e=!1;$(":input[required]").each((function(){""==$(this).val()&&(e=!0)})),e?$("#emp-reg-submit").prop("disabled",!0):$("#emp-reg-submit").prop("disabled",!1)}$("#send-notif").on("click",(function(){$(".spinner-border").show()})),$(".search-status-rdb-input").on("click",(function(){r()})),$(".search-filter-rdb-input").on("click",(function(){r()})),$("#search-input").on("input",(function(){r()})),a(),$(":input[required]").change((function(){a()})),$("#emp-confirm-password, #emp-password").keyup((function(){$("#emp-confirm-password").val()!=$("#emp-password").val()?($("#confirm-pass-text").html("Password does not match.").addClass("text-danger text-start"),$("#emp-reg-submit").prop("disabled",!0)):($("#confirm-pass-text").html(""),a())})),$(".btn-prevent-multiple-submit").on("submit",(function(t){e.preventDefault(),$(".btn-prevent-multiple-submit").prop("disabled",!0)})),$("#cp-confirm-pw, #cp-new-pw").keyup((function(){$("#cp-confirm-pw").val()!=$("#cp-new-pw").val()?($("#confirm-pass-text").html("Password does not match.").addClass("text-danger text-start"),$("#ecp-submit-btn").prop("disabled",!0)):$("#confirm-pass-text").html("")})),$("#cp-submit-btn").click((function(e){var t={_token:$("#changePasswordForm > input[name=_token]").val(),current_password:$("#cp-current-pw").val(),new_password:$("#cp-new-pw").val(),id:$("#changePasswordForm > input[name=cp_id]").val()};$.ajax({type:"POST",url:"/devj_portal/public/api/changePassword",data:t,dataType:"json",encode:!0}).done((function(e){if(e.success)$("#changePasswordForm").trigger("reset"),$("#current-pass-error").empty(),$("#new-pass-error").empty(),$("#cp-success-msg").html('<i class="bi bi-check-circle-fill"></i>&nbsp;You have successfully changed your account password.').addClass("text-success mb-4 text-start");else{var t=e.data.current_password;t&&t.length>0&&$("#current-pass-error").html(t[0]).addClass("text-danger text-start");var r=e.data.new_password;r&&r.length>0&&$("#new-pass-error").html(r[0]).addClass("text-danger text-start")}})).fail((function(){console.log("error")})),e.preventDefault()})),$("#lp-submit-btn").click((function(e){var t={_token:$("#linkProjectForm > input[name=_token]").val(),employee_id:$("#linkProjectForm > input[name=lp_employee_id]").val(),project_id:$("#projectList > option:selected").val(),project_start:$("#project-start").val(),project_end:$("#project-end").val(),project_role:$("#projectRoleList > option:selected").val(),project_onsite:$("#project-onsite").is(":checked")?1:0};$.ajax({type:"POST",url:"/devj_portal/public/api/linkProject",data:t,dataType:"json",encode:!0}).done((function(e){if(e.success)$("#linkProjectForm").trigger("reset"),$("#error-lp-proj-name").empty(),$("#error-lp-proj-role").empty(),$("#error-lp-proj-start").empty(),$("#error-lp-proj-end").empty(),$("#projectList > option[value="+t.project_id+"]").remove(),$("#lp-success-msg").html('<i class="bi bi-check-circle-fill"></i>&nbsp;'+e.message+".").addClass("text-success mb-4 text-start");else{var r=e.data.project_id;r&&r.length>0&&$("#error-lp-proj-name").html(r[0]).addClass("text-danger text-start");var a=e.data.project_role;a&&a.length>0&&$("#error-lp-proj-role").html(a[0]).addClass("text-danger text-start");var s=e.data.project_start;s&&s.length>0&&$("#error-lp-proj-start").html(s[0]).addClass("text-danger text-start");var o=e.data.project_end;o&&o.length>0&&$("#error-lp-proj-end").html(o[0]).addClass("text-danger text-start")}})).fail((function(){console.log("error")})),e.preventDefault()})),$("#ll-submit-btn").click((function(e){var t={_token:$("#linkLaptopForm > input[name=_token]").val(),employee_id:$("#linkLaptopForm > input[name=ll_employee_id]").val(),laptop_id:$("#laptopList > option:selected").val(),brought_home_flag:$("#ll-brought-home").is(":checked")?1:0,vpn_access_flag:$("#ll-vpn").is(":checked")?1:0,surrender_flag:$("#ll-surrender").is(":checked")?1:0,surrender_date:$("#ll-surrender-date").val()};$.ajax({type:"POST",url:"/devj_portal/public/api/linkLaptop",data:t,dataType:"json",encode:!0}).done((function(e){if(e.success)$("#linkLaptopForm").trigger("reset"),$("#error-laptop-id").empty(),$("#error-surrender-date").empty(),$("#laptopList > option[value="+t.laptop_id+"]").remove(),$("#ll-success-msg").html('<i class="bi bi-check-circle-fill"></i>&nbsp;'+e.message+".").addClass("text-success mb-4 text-start");else{var r=e.data.laptop_id;r&&r.length>0&&$("#error-laptop-id").html(r[0]).addClass("text-danger text-start");var a=e.data.surrender_date;a&&a.length>0&&$("#error-surrender-date").html(a[0]).addClass("text-danger text-start")}})).fail((function(){console.log("error")})),e.preventDefault()})),$("#reject-request-form").submit((function(){if(""==$("#reject-reason").val())return console.log("hello"),$("#reject-reason-error").html("The reason field is required.").addClass("text-danger text-start"),!1})),$("#emp-update-form").submit((function(){$("#active-status").is(":checked")&&$("#active-status-hidden").prop("disabled",!0),$("#server-manage-flag").is(":checked")&&$("#server-manage-flag-hidden").prop("disabled",!0)}))}));