(()=>{function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}$(document).ready((function(){e(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(e){return new bootstrap.Tooltip(e)}));var t=$("#server_list").DataTable({stateSave:!0,pageLength:25,oLanguage:{sEmptyTable:"There is no record found",sZeroRecords:"There is no record found",sInfoFiltered:""},sDom:"lrt<'#bottom.row'<'#info.col'i><'#pagination.col'p>>"});function n(){t.column(6).search("").draw(),t.search("").draw()}function i(){1==$(".partition_section").length?$(".partition_section .remove_partition").hide():$(".partition_section .remove_partition").show()}function a(e){var t=e.attr("id").match(/\d+/);t=parseInt(t),$("#hdd_size_radio_"+t).is(":checked")?o(t):$("#hdd_percentage_radio_"+t).is(":checked")&&o(t,!1)}function o(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!t,i=!!t;$("#hdd_used_percentage_"+e).prop("disabled",i),$("#hdd_free_percentage_"+e).prop("disabled",i),$("#hdd_used_"+e).prop("disabled",n),$("#hdd_used_unit_"+e).prop("disabled",n),$("#hdd_free_"+e).prop("disabled",n),$("#hdd_free_unit_"+e).prop("disabled",n)}function r(){$("#memory_size_radio").is(":checked")?d():$("#memory_percentage_radio").is(":checked")&&d(!1)}function d(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!e,n=!!e;$("#memory_percentage_section").find("input[type=text]").each((function(){$(this).prop("disabled",n)})),$("#memory_size_section").find("input[type=text]").each((function(){$(this).prop("disabled",t)})),$("#memory_size_section").find("select").each((function(){$(this).prop("disabled",t)}))}function s(){$("#linux_radio").is(":checked")?c():$("#other_os_radio").is(":checked")&&c(!1)}function c(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!e,n=!!e;$("#linux_usage").find("input[type=text]").each((function(){$(this).prop("disabled",t)})),$("input[name=other_os_percentage").prop("disabled",n)}function u(e){if(""!=e.find(".hdd_total").val()&&""!=e.find(".hdd_total_unit").val()){var t=l(e.find(".hdd_total_unit").val()),n=l(e.find(".hdd_total").val()),i=f(n,t);if(e.find(".hdd_size_radio").is(":checked")&&""!=e.find(".hdd_used").val()&&""!=e.find(".hdd_used_unit").val()){var a=l(e.find(".hdd_used_unit").val()),o=f(l(e.find(".hdd_used").val()),a),r=m(i,o,a);e.find(".hdd_free_unit > option[value="+a+"]").prop("selected",!0),e.find(".hdd_free").val(r),percentage=parseFloat(100*o/i).toFixed(2);var d=parseFloat(100-percentage).toFixed(2);e.find(".hdd_used_percentage").val(percentage),e.find(".hdd_free_percentage").val(d)}else if(e.find(".hdd_percentage_radio").is(":checked")&&""!=e.find(".hdd_used_percentage").val()){percentage=parseFloat(e.find(".hdd_used_percentage").val().toString()),d=parseFloat(100-percentage).toFixed(2),e.find(".hdd_free_percentage").val(d),e.find(".hdd_free_unit > option[value="+t+"]").prop("selected",!0),e.find(".hdd_used_unit > option[value="+t+"]").prop("selected",!0);var s=(percentage*n/100).toFixed(2);r=(n-s).toFixed(2),e.find(".hdd_used").val(s),e.find(".hdd_free").val(r)}}}function p(){var e,t,n=0,i=0;if($(".partition_section").each((function(){var a=$(this);e=0,t=0,""!=a.find(".hdd_total").val()&&""!=a.find(".hdd_total_unit").val()&&""!=a.find(".hdd_used").val()&&""!=a.find(".hdd_used_unit").val()&&(e=f(l(a.find(".hdd_total").val()),l(a.find(".hdd_total_unit").val())),t=f(l(l(a.find(".hdd_used").val())),l(a.find(".hdd_used_unit").val())),n+=e,i+=t)})),0!=n){var a=i/n*100;a=a.toFixed(2),g($("#hdd_status"),$("input[name=hdd_status]"),a)}}function l(e){var t=parseFloat(e.toString());return isNaN(t)?0:t}function _(){var e;$("#other_os_radio").is(":checked")&&""!=$("input[name=other_os_percentage]").val()?e=v($("input[name=other_os_percentage]")):!$("#linux_radio").is(":checked")||""==$("#us").val()&&""==$("#ni").val()&&""==$("#sy").val()||(e=(v($("#us"))+v($("#ni"))+v($("#sy")))/3),g($("#cpu_status"),$("input[name=cpu_status]"),e)}function h(){var e;if(""!=$("#memory_total").val()){var t=v($("#memory_total_unit > option:selected")),n=v($("#memory_total")),i=f(n,t);if($("#memory_size_radio").is(":checked")&&""!=$("#memory_used").val()&&""!=$("#memory_used_unit").val()){var a=v($("#memory_used_unit > option:selected")),o=f(v($("#memory_used")),a),r=m(i,o,a);$("#memory_free_unit > option[value="+a+"]").prop("selected",!0),$("input[name=memory_free]").val(r),e=parseFloat(100*o/i).toFixed(2);var d=parseFloat(100-e).toFixed(2);$("input[name=memory_used_percentage]").val(e),$("input[name=memory_free_percentage]").val(d)}else if($("#memory_percentage_radio").is(":checked")&&""!=$("#memory_used_percentage").val()){e=parseFloat($("#memory_used_percentage").val().toString()),d=parseFloat(100-e).toFixed(2),$("#memory_free_percentage").val(d),$("#memory_free_unit option[value="+t+"]").prop("selected",!0),$("#memory_used_unit option[value="+t+"]").prop("selected",!0);var s=(e*n/100).toFixed(2);r=(n-s).toFixed(2),$("#memory_used").val(s),$("#memory_free").val(r)}g($("#memory_status"),$("input[name=memory_status]"),e)}}function f(e,t){return e*Math.pow(1024,t-1)}function m(e,t,n){var i=Math.pow(1024,n-1);return parseFloat(((e-t)/i).toFixed(2))}function v(e){var t=parseFloat(e.val().toString());return isNaN(t)?0:t}function g(e,t,n){void 0===n||!Number.isInteger(n)&&null===n.toString().match(/\d+[.]?\d+/)?(e.empty(),t.val("")):n<=60?(e.text("Normal").removeClass("text-danger text-primary").addClass("text-black"),t.val(1)):n<=89?(e.text("Stable").removeClass("text-danger text-black").addClass("text-primary"),t.val(2)):(e.text("Critical").removeClass("text-black text-primary").addClass("text-danger"),t.val(3))}n(),$("#server-status").on("change",(function(){var e=$("input[name=serverStatus]:checked").val();if(1==e)n();else{if(2==e)var i="^Active$";else 3==e&&(i="^Inactive$");t.column(6).search(i,!0,!1).draw()}})),$("#search-input").on("input",(function(){var e=$(this).val();t.search(e).draw()})),$("#server_list").on("click",".delete_server",(function(e){var t=$(this).data("id"),n=$(this).data("server_name");confirm("Delete ".concat(n,"?"))&&(console.log("delete server"),$.ajax({type:"GET",url:"/api/servers/delete",data:{id:t},dataType:"json"}).done((function(e){console.log("done"),e.success?location.reload():$('<div class="alert alert-danger" role="alert">'.concat(e.error,"</div>")).insertBefore(".container-list-table")})).fail((function(){console.log("error")}))),e.preventDefault()})),$("#add_partition").click((function(e){var t=$(".partition_section").last();1==$(".partition_section").length&&t.find(".remove_partition").show();var n=t.clone();n.find("[id]").each((function(){$(this).attr("id",$(this).attr("id").replace(/(\d+)/,(function(e,t){return parseInt(t)+1})))})),n.find("[name]").each((function(){$(this).attr("name",$(this).attr("name").replace(/(\d+)/,(function(e,t){return parseInt(t)+1}))),"radio"==$(this).attr("type")?1==$(this).attr("value")?$(this).prop("checked",!0):$(this).prop("checked",!1):"text"==$(this).attr("type")?$(this).val(""):$(this).val(1)})),n.find("[for]").each((function(){$(this).attr("for",$(this).attr("for").replace(/(\d+)/,(function(e,t){return parseInt(t)+1})))})),n.find(".text-danger").each((function(){$(this).html("")})),t.after(n),o(parseInt(n.find(".partition_name").attr("id").match(/\d+/)),!0),e.preventDefault()})),$("#hdd_partitions").on("click",".remove_partition",(function(e){var t;$(this).parents(".partition_section").remove(),i(),t=1,$(".partition_section").each((function(){var e=$(this);e.find("[id]").each((function(){$(this).attr("id",$(this).attr("id").replace(/(\d+)/,t))})),e.find("[name]").each((function(){$(this).attr("name",$(this).attr("name").replace(/(\d+)/,t))})),e.find("[for]").each((function(){$(this).attr("for",$(this).attr("for").replace(/(\d+)/,t))})),t++})),e.preventDefault()})),i(),$(".partition_section").each((function(){a($(this).find(".hdd_select_radio"))})),$("#hdd_partitions").on("click",".hdd_select_radio",(function(){a($(this))})),r(),$("input[name=memory_input_type]").change((function(){r()})),s(),$("input[name=os_type]").change((function(){s()})),$("#hdd_partitions").on("change",".hdd_select_radio",(function(){u($(this).parents(".partition_section")),p()})),$("#hdd_partitions").on("input",".hdd_total",(function(){u($(this).parents(".partition_section")),p()})),$("#hdd_partitions").on("change",".hdd_total_unit",(function(){u($(this).parents(".partition_section")),p()})),$("#hdd_partitions").on("input",".hdd_used",(function(){u($(this).parents(".partition_section")),p()})),$("#hdd_partitions").on("change",".hdd_used_unit",(function(){u($(this).parents(".partition_section")),p()})),$("#hdd_partitions").on("input",".hdd_used_percentage",(function(){u($(this).parents(".partition_section")),p()})),$("input[name=os_type]").on("change",(function(){_()})),$("#us").on("input",(function(){_()})),$("#sy").on("input",(function(){_()})),$("#ni").on("input",(function(){_()})),$("input[name=other_os_percentage]").on("input",(function(){_()})),$("input[name=memory_input_type]").on("change",(function(){h()})),$("input[name=memory_total]").on("input",(function(){h()})),$("#memory_total_unit").on("change",(function(){h()})),$("input[name=memory_used]").on("input",(function(){h()})),$("#memory_used_unit").on("change",(function(){h()})),$("input[name=memory_used_percentage]").on("input",(function(){h()})),$("#server_reg_form").on("submit",(function(){$("#usage").find("input").each((function(){$(this).prop("disabled",!1)})),$("#usage").find("select").each((function(){$(this).prop("disabled",!1)})),$("input[name=partitions_count]").val($(".partition_section").length)}))}))})();
