$(document).ready((function(){var e=$("#laptop-list").DataTable({stateSave:!0,bFilter:!1,pageLength:25,oLanguage:{sEmptyTable:"There is no record found"}});function a(){$.ajax({type:"GET",url:"/api/laptops/search",data:{keyword:$("input[name=searchInput]").val(),availability:$("input[name=laptopAvailability]:checked").val(),status:$("input[name=laptopStatus]:checked").val(),searchFilter:$("input[name=searchFilter]:checked").val()},dataType:"json",encode:!0}).done((function(a){a.success&&(e.clear().draw(),a.update.forEach((function(a){e.row.add(['<a href="'+window.location.href+"/"+a.id+'">'+a.tag_number+"</a>",a.laptop_make,a.laptop_model,a.laptop_cpu,a.laptop_clock_speed,a.laptop_ram,a.owner,a.status]).draw(!1)})))})).fail((function(){console.log("error")}))}function r(){$("#link_to_self").is(":checked")?$("#linkage_form").removeClass("d-none"):$("#linkage_form").addClass("d-none")}$(".laptop-search-availability").click((function(){a()})),$(".laptop-status").click((function(){a()})),$(".laptop-filter").click((function(){a()})),$("#search-input").on("input",(function(){a()})),$("#edit-form").submit((function(e){$("#el-spinner").show(),$("#el-submit-btn").prop("disabled",!0);var a=$("#edit-form").serializeArray(),r=[];a.forEach((function(e){r[e.name]=e.value})),$("#edit-form input[name=status").length&&(r.status=$("#edit-form input[name=status").is(":checked")?1:0);var t=JSON.stringify(Object.assign({},r));t=JSON.parse(t),$.ajax({type:"POST",url:"/api/laptops/update",data:t,dataType:"json",encode:!0}).done((function(e){for(var a in t)$("#"+a+"-error").empty();if(e.success)location.reload();else{for(var a in errors=e.data,errors)$("#"+a+"-error").html(errors[a][0]);$("#el-submit-btn").prop("disabled",!1),$("#el-spinner").hide()}})).fail((function(){console.log("error")})),e.preventDefault()})),$("#link-req-tbl").DataTable({stateSave:!0,bFilter:!1,ordering:!1,pageLength:10,oLanguage:{sEmptyTable:"No Data"}}),$("#update-linkage-form").submit((function(e){$("#ul-submit-btn").prop("disabled",!0),$("#link-update-spinner").show();var a=$("#update-linkage-form").serializeArray(),r=[];a.forEach((function(e){r[e.name]=e.value})),r.brought_home_flag=$("#ul-brought-home").is(":checked")?1:0,r.vpn_flag=$("#ul-vpn").is(":checked")?1:0,r.surrender_flag=$("#ul-surrender").is(":checked")?1:0;var t=JSON.stringify(Object.assign({},r));t=JSON.parse(t),$.ajax({type:"POST",url:"/api/laptops/updateLinkage",data:t,dataType:"json",encode:!0}).done((function(e){for(var a in t)$("#ul-"+a+"-error").empty();if(e.success)location.reload();else{for(var a in errors=e.data,errors)$("#ul-"+a+"-error").html(errors[a][0]).addClass("text-danger");$("#ul-submit-btn").prop("disabled",!1),$("#link-update-spinner").hide()}})).fail((function(){console.log("error")})),e.preventDefault()})),$("#link-form").submit((function(e){$("#ll-submit-btn").prop("disabled",!0),$("#link-update-spinner").show();var a=$("#link-form").serializeArray(),r=[];a.forEach((function(e){r[e.name]=e.value})),r.brought_home_flag=$("#ll-brought-home").is(":checked")?1:0,r.vpn_flag=$("#ll-vpn").is(":checked")?1:0;var t=JSON.stringify(Object.assign({},r));t=JSON.parse(t),$.ajax({type:"POST",url:"/api/laptops/registLinkage",data:t,dataType:"json",encode:!0}).done((function(e){for(var a in t)$("#ll-"+a+"-error").empty();if(e.success)location.reload();else{for(var a in errors=e.data,errors)$("#ll-"+a+"-error").html(errors[a][0]).addClass("text-danger");$("#ll-submit-btn").prop("disabled",!1),$("#link-update-spinner").hide()}})).fail((function(){console.log("error")})),e.preventDefault()})),$("#emp-hist-tbl").DataTable({stateSave:!0,pageLength:10,ordering:!1,bFilter:!1,oLanguage:{sEmptyTable:"No Data"}}),$("#reject-request-form").submit((function(){return""==$("#reject-reason").val()?($("#reject-reason-error").html("The reason field is required.").addClass("text-danger text-start"),!1):$("#reject-reason").val().length>1024?($("#reject-reason-error").html("The reason must not be greater than 1024 characters.").addClass("text-danger text-start"),!1):void $("#reject-sub").prop("disabled",!0)})),$(".reject-link-btn").click((function(){var e=$(this).data("linkid");$("#reject-link-in").val(e)})),$(".approve-link-btn").click((function(){var e=$(this).data("linkid");$("#approve-link-in").val(e)})),r(),$("#link_to_self").click((function(e){r()})),$("#lapreg_form").submit((function(){console.log("submission"),$("#link_to_self").length&&$("#link_to_self").is(":checked")&&$("#link_to_self_hidden").prop("disabled",!0),$("#brought_home_flag").is(":checked")&&$("#brought_home_flag_hidden").prop("disabled",!0),$("#vpn_flag").is(":checked")&&$("#vpn_flag_hidden").prop("disabled",!0)}))}));
